-- File: database/seeds.sql
-- This file populates the database with initial mock data for development and testing.

-- Use TRUNCATE to clear the tables. CASCADE is used to also clear any dependent tables.
-- The order is important to avoid foreign key constraint errors.
TRUNCATE TABLE users, roles, permissions, user_roles, role_permissions,
            advisors, students, programs, courses, semesters,
            course_offerings, course_prerequisites, program_requirements,
            requirement_courses, degree_plans, advising_relations,
            student_certificates, enrollments, notifications, degree_plan_comments
CASCADE;

INSERT INTO roles (role_id, role_name) VALUES
(1, 'admin'),
(2, 'advisor'),
(3, 'student'),
(4, 'accounting');

INSERT INTO permissions (permission_id, permission_name) VALUES
(1, 'view_all_students'),
(2, 'view_assigned_students'),
(3, 'view_own_data'),
(4, 'edit_degree_plan'),
(5, 'comment_create'),
(6, 'comment_edit'),
(7, 'comment_delete'),
(8, 'enrollment_reporting'),
(9, 'graduation_reporting'),
(10, 'user_create'),
(11, 'user_modify'),
(12, 'user_delete'),
(13, 'user_grant_permissions');

-- Insert role_permissions
-- Admin: all permissions
INSERT INTO role_permissions (role_id, permission_id) VALUES
(1, 1), (1, 4), (1, 5), (1, 6), (1, 7), (1, 8), (1, 9), (1, 10), (1, 11), (1, 12), (1, 13);

-- Advisor: view and edit degree plans, view reports
INSERT INTO role_permissions (role_id, permission_id) VALUES
(2, 4), (2, 5), (2, 6), (2, 7), (2, 8);

-- Student: view their own degree plan and add comments
INSERT INTO role_permissions (role_id, permission_id) VALUES
(3, 6), (3, 7);

-- Accounting: enrollement and graduation reporting
INSERT INTO role_permissions (role_id, permission_id) VALUES
(4, 8), (4, 9);

-- Insert users
-- Note: Passwords should be securely hashed, these are just placeholders
INSERT INTO users (user_id, password_hash, email, phone_number, first_name, last_name) VALUES
(1, 'supersecurehash1', 'admin@boisestate.edu', '555-123-4567', 'Admin', 'User'),
(2, 'supersecurehash2', 'advisor1@boisestate.edu', '555-987-6543', 'Jane', 'Doe'),
(3, 'supersecurehash3', 'advisor2@boisestate.edu', '555-555-5555', 'John', 'Smith'),
(4, 'supersecurehash4', 'student1@u.boisestate.edu', '555-222-3333', 'Alice', 'Johnson'),
(5, 'supersecurehash5', 'student2@u.boisestate.edu', '555-444-1111', 'Bob', 'Williams');

-- Assign roles to users
INSERT INTO user_roles (user_id, role_id) VALUES
(1, 1), -- Admin User
(2, 2), -- Jane Doe (Advisor and also admin)
(2, 1), -- Jane Doe (Admin)
(3, 2), -- John Smith (Advisor)
(4, 3), -- Alice Johnson (Student)
(5, 3); -- Bob Williams (Student)

-- Insert advisors
INSERT INTO advisors (advisor_id, user_id) VALUES
(1, 2), -- Jane Doe
(2, 3); -- John Smith

-- Insert programs
INSERT INTO programs (program_id, program_name, program_type) VALUES
(1, 'Master of Science in Organizational Performance and Workplace Learning', 'masters'),
(2, 'Graduate Certificate in Organizational Development (OD)', 'certificate');

-- Insert students
-- UUIDs are automatically generated by the database
INSERT INTO students (student_id, school_student_id, user_id) VALUES
(1, '112299690', 4), -- Alice Johnson in OPWL MS program
(2, '113601927', 5); -- Bob Williams in OD certificate program

-- Insert student-program assignments
INSERT INTO student_programs (student_id, program_id) VALUES
(1, 1), -- Alice Johnson in OPWL MS
(1, 2), -- Alice Johnson also in OD certificate
(2, 2); -- Bob Williams in OD certificate

-- Insert student-advisor assignments
-- Alice Johnson is assigned to Jane Doe and John Smith, Bob Williams to John Smith
INSERT INTO advising_relations (advisor_id, student_id) VALUES
(1, 1), -- Alice Johnson assigned to Jane Doe
(1, 2), -- Bob Williams assigned to Jane Doe
(2, 2); -- Bob Williams assigned to John Smith

-- Insert courses
-- Note: `course_id` is the primary key (integer), and course_code is a unique string identifier
INSERT INTO courses (course_id, course_code, course_name, credits) VALUES
(1, 'OPWL-536', 'Organizational Performance and Workplace Learning', 4),
(2, 'OPWL-506', 'Survey Design and Data Analysis', 1),
(3, 'OPWL-560', 'Workplace Performance Improvement', 4),
(4, 'OPWL-518', 'Contracting and Consulting', 2),
(5, 'OPWL-592', 'Portfolio (1) - Graduation term', 1),
(6, 'OPWL-507', 'Interviews and Data Analysis', 1),
(7, 'OPWL-531', 'Quantitative Research Organizations', 3),
(8, 'OPWL-529', 'Needs Assesment', 4),
(9, 'OPWL-530', 'Evaluation', 4);

-- TODO: Add more courses as needed and update course prerequisites and offerings accordingly

-- Insert course prerequisites
INSERT INTO course_prerequisites (course_id, prerequisite_course_id) VALUES
(7, 1), -- OPWL-531 requires OPWL-536
(3, 1), -- OPWL-560 requires OPWL-536
(9, 1), -- OPWL-529 requires OPWL-536
(8, 1); -- OPWL-530 requires OPWL-536


-- Insert semesters
INSERT INTO semesters (semester_id, semester_name, semester_type, sem_start_date, sem_end_date) VALUES
(1, 'Fall 2023', 'FA', '2023-08-21', '2023-12-15'),
(2, 'Spring 2024', 'SP', '2024-01-15', '2024-05-10'),
(3, 'Summer 2024', 'SU', '2024-06-01', '2024-08-01'),
(4, 'Fall 2024', 'FA', '2024-08-20', '2024-12-14'),
(5, 'Spring 2025', 'SP', '2025-01-13', '2025-05-09'),
(6, 'Summer 2025', 'SU', '2025-06-02', '2025-08-03'),
(7, 'Fall 2025', 'FA', '2025-08-19', '2025-12-13'),
(8, 'Spring 2026', 'SP', '2026-01-12', '2026-05-08'),
(9, 'Summer 2026', 'SU', '2026-06-01', '2026-08-02'),
(10, 'Fall 2026', 'FA', '2026-08-18', '2026-12-12'),
(11, 'Spring 2027', 'SP', '2027-01-11', '2027-05-07');

-- Insert semester offerings
INSERT INTO course_offerings (course_id, semester_type) VALUES
(1, 'FA'), -- OPWL-536 offered in Fall
(1, 'SP'), -- OPWL-536 offered in Spring
(1, 'SU'), -- OPWL-536 offered in Summer
(2, 'FA'), -- OPWL-506 offered in Fall
(2, 'SP'), -- OPWL-506 offered in Spring
(3, 'FA'), -- OPWL-560 offered in Fall
(3, 'SP'), -- OPWL-560 offered in Spring
(4, 'FA'), -- OPWL-518 offered in Fall
(4, 'SP'), -- OPWL-518 offered in Spring
(5, 'FA'), -- OPWL-592 offered in Fall
(5, 'SP'), -- OPWL-592 offered in Spring
(5, 'SU'), -- OPWL-592 offered in Summer
(6, 'SP'), -- OPWL-507 offered in Spring
(6, 'SU'), -- OPWL-507 offered in Summer
(7, 'FA'), -- OPWL-531 offered in Fall
(7, 'SU'), -- OPWL-531 offered in Summer
(8, 'FA'), -- OPWL-529 offered in Fall
(8, 'SP'), -- OPWL-529 offered in Spring
(9, 'FA'), -- OPWL-530 offered in Fall
(9, 'SP'); -- OPWL-530 offered in Spring

-- Insert program requirements
-- Note: Some requirements are hierarchical (e.g., culminating activity with sub-requirements)
INSERT INTO program_requirements (requirement_id, program_id, requirement_type, parent_requirement_id, required_credits, req_description) VALUES
(1, 1, 'core', NULL, 12, 'Core Courses for OPWL MS'), -- Core requirement for OPWL MS
(2, 2, 'core', NULL, 4, 'Core Course for OD Certificate'), -- Core requirement for OD certificate
(3, 1, 'culminating_activity', NULL, NULL, 'Complete one (1) of the following'), -- Culminating activity for OPWL MS (Parent requirement)
(4, 1, 'portfolio', 3, NULL, 'Complete all of the following'), -- Portfolio requirement under culminating activity
(5, 1, 'research', 4, 3, 'Take at least 3 credits from the following (RESEARCH)'), -- Research requirement under portfolio
(6, 1, 'elective', 4, 8, 'Take at least 8 credits from the following'), -- Elective requirement under portfolio
(7, 1, 'misc', 4, 1, 'Take at least 1 credits from the following'); -- Misc requirement under portfolio

-- TODO: insert other flexible requirements if needed (thesis, etc.)

-- Insert requirement courses
INSERT INTO requirement_courses (requirement_id, course_id) VALUES
(1, 1), -- OPWL-536 is a core course for OPWL MS
(2, 1), -- OPWL-536 is a core course for OD certificate
(5, 2), -- OPWL-506 counts towards research requirement
(5, 6), -- OPWL-507 counts towards research requirement
(5, 7); -- OPWL-531 counts towards research requirement

-- TODO: Add more requirement courses as needed

-- Insert degree plan entries for Alice Johnson (student1)
INSERT INTO degree_plans (plan_id, program_id, student_id, course_id, semester_id, course_status, catalog_year) VALUES
(1, 1, 1, 1, 7, 'In Progress', '2025-2026'), -- OPWL-536 in Fall 2025 for Alice Johnson in OPWL MS
(2, 1, 1, 6, 7, 'In Progress', '2025-2026'), -- OPWL-507 in Fall 2025 for Alice Johnson in OPWL MS
(3, 1, 1, 3, 10, 'Planned', '2025-2026'), -- OPWL-560 in Fall 2026 for Alice Johnson in OPWL MS
(4, 1, 1, 9, 8, 'Planned', '2025-2026'), -- OPWL-530 in Spring 2026 for Alice Johnson in OPWL MS
(5, 1, 1, 5, 11, 'Planned', '2025-2026'); -- OPWL-592 in Spring 2027 for Alice Johnson in OPWL MS

INSERT INTO degree_plans (plan_id, program_id, student_id, course_id, semester_id, course_status, catalog_year) VALUES
(6, 2, 1, 2, 8, 'Planned', '2025-2026'), -- OPWL-506 in Spring 2026 for Alice Johnson in OD certificate
(7, 2, 1, 4, 8, 'Planned', '2025-2026'); -- OPWL-518 in Spring 2026 for Alice Johnson in OD certificate

-- Insert degree plan entries for Bob Williams (student2)
INSERT INTO degree_plans (plan_id, program_id, student_id, course_id, semester_id, course_status, catalog_year) VALUES
(10, 2, 2, 1, 7, 'In Progress', '2025-2026'), -- OPWL-536 in Fall 2025 for Bob Williams in OD certificate
(11, 2, 2, 4, 8, 'Planned', '2025-2026'), -- OPWL-518 in Spring 2026 for Bob Williams in OD certificate
(12, 2, 2, 5, 9, 'Planned', '2025-2026'); -- OPWL-592 in Summer 2026 for Bob Williams in OD certificate

-- Insert into enrollments
INSERT INTO enrollments (enrollment_id, student_id, course_id, semester_id, grade) VALUES
(1, 1, 1, 7, NULL), -- Alice Johnson enrolled in OPWL-536 in Fall 2025
(2, 1, 6, 7, NULL), -- Alice Johnson enrolled in OPWL-507 in Fall 2025
(3, 2, 2, 1, NULL); -- Bob Williams enrolled in OPWL-536 in Fall 2025